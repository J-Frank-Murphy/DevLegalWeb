<!-- Flexible Post Display Template -->
<section class="posts-section">
    <div class="container">
        <!-- Optional section title -->
        {% if section_title == "Latest Insights" %}
            <h1 style="text-align: center; padding-top: 5rem; font-size: 2.2rem">{{ section_title }}</h1>
        {% endif %}
        
        <!-- Post grid -->
        <div class="blog-posts">
            {% if posts %}
                {% for post in posts %}
                <div class="blog-post">
                    <div class="blog-post-thumbnail">
                        <img src="{{ url_for('static', filename=post.featured_image) if post.featured_image else url_for('static', filename='images/default-post.jpg') }}" alt="{{ post.title }}">
                    </div>
                    <div class="blog-post-content">
                        <div class="blog-post-meta">
                            <span class="blog-post-date">{{ post.created_at.strftime('%B %d, %Y') }}</span>
                            <span class="blog-post-category">{{ post.category.name }}</span>
                        </div>
                        <h3 class="blog-post-title">{{ post.title }}</h3>
                        <p class="blog-post-excerpt">{{ post.excerpt }}</p>
                        <a href="{{ url_for('blog.post', slug=post.slug) }}" class="read-more">Read More</a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="no-posts-message">
                    <p>No posts found matching the criteria.</p>
                </div>
            {% endif %}
        </div>
        
        <!-- Pagination controls -->
        {% if show_pagination and pagination %}
        <div class="pagination">
            {% if pagination.has_prev %}
                <a href="{{ url_for(request.endpoint, page=pagination.prev_num, **pagination_args) }}" class="pagination-prev">&laquo; Previous</a>
            {% else %}
                <span class="pagination-prev disabled">&laquo; Previous</span>
            {% endif %}
            
            {% for page_num in range(1, pagination.pages + 1) %}
                {% if page_num == pagination.page %}
                    <span class="pagination-current">{{ page_num }}</span>
                {% else %}
                    <a href="{{ url_for(request.endpoint, page=page_num, **pagination_args) }}" class="pagination-num">{{ page_num }}</a>
                {% endif %}
            {% endfor %}
            
            {% if pagination.has_next %}
                <a href="{{ url_for(request.endpoint, page=pagination.next_num, **pagination_args) }}" class="pagination-next">Next &raquo;</a>
            {% else %}
                <span class="pagination-next disabled">Next &raquo;</span>
            {% endif %}
        </div>
        {% endif %}
        
        <!-- Optional CTA button -->
        {% if show_view_all and view_all_url %}
        <div class="text-center">
            <a 
            href="{{ view_all_url }}"
            class="cta-button"
            style="margin-bottom: 5rem"
            >
            {{ view_all_text|default('View All Posts') }}</a>
        </div>
        {% endif %}
    </div>
</section>
